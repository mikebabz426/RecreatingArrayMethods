<script src="../simpletest.js"></script>
<script>
  //Notes:
  //Syntax: arr.lastIndexOf(searchElement[, fromIndex])
  //. If fromIndex is negative, the search starts at the array length plus fromIndex .
  function lastIndexOf(originalArray, searchElement, optionalIndex) {
    if (arguments.length < 3) {
      index = originalArray.length - 1;
    } else if (optionalIndex >= 0 && optionalIndex < originalArray.length - 1) {
      index = optionalIndex;
    } else if (optionalIndex >= originalArray.length) {
      index = originalArray.length - 1;
    } else if (optionalIndex < 0) {
      index = optionalIndex + originalArray.length;
      if (index < 0) {
        return -1;
      }
    } else {
      return -1;
    }

    for (var i = index; i > -1; i--) {
      if (searchElement === originalArray[i]) {
        return i;
      }
    }
    return -1;
  }

  tests({
    "It should return the index of the searchElement provided if it is within the array": function () {
      var testArray = ["banana", "orange", "peach", "pineapple"];

      result = lastIndexOf(testArray, "peach");
      seq(result, 2);
    },
    "It should return the index of the LAST instance of the item within the array ": function () {
      var testArray = ["apple", "orange", "peach", "orange", "pineapple"];

      result = lastIndexOf(testArray, "orange");
      seq(result, 3);
    },
    "It should return -1 if the searchElement is not present within the array": function () {
      var testArray = ["apple", "orange", "peach", "pineapple"];

      result = lastIndexOf(testArray, "banana");
      seq(result, -1);
    },
    "It should start the search from the optionalIndex if one is provided": function () {
      var testArray = ["apple", "orange", "peach", "pineapple", "orange"];

      result = lastIndexOf(testArray, "orange", 2);
      seq(result, 1);
    },
    "If no optionalIndex is provided, function will execute from last element in the array": function () {
      var testArray = ["apple", "orange", "peach", "apple"];

      result = lastIndexOf(testArray, "apple");
      seq(result, 3);
    },
    "It should search the entire array if optionalIndex is greater than the length of the array": function () {
      var testArray = ["apple", "orange", "peach", "pineapple"];

      result = lastIndexOf(testArray, "pineapple", 20);
      seq(result, 3);
    },
    "It should take a negative optionalIndex as the offset from the end of the array ": function () {
      var testArray = ["apple", "orange", "peach", "pineapple"];

      result = lastIndexOf(testArray, "apple", -4);
      seq(result, 0);
    },
    "It should work for strings or numbers": function () {
      var testArray = [4, 5, 6, 9];

      result = lastIndexOf(testArray, 9);
      seq(result, 3);
    },
  });
</script>
